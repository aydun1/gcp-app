<h2 mat-dialog-title>Add a site to {{ data.customer.accountnumber }}</h2>
<form (ngSubmit)="siteId ? renameSite() : addSite()" [formGroup]="siteForm">
  <mat-dialog-content>
    <p>Only use this when you wish to keep track of pallets for customers with more than one physical location, but only one debtor ID.</p>
    <mat-list>
      <mat-list-item *ngFor="let site of data.sites" (click)="openEditor(site.id, site.fields.Title)" [class.active] = "site.id === siteId">
        <div mat-line>{{ site.fields.Title }}</div>
        <button *ngIf="site.id === siteId" color="warn" type="button" mat-raised-button class="icon" (click)="deleteSite()" [disabled]="loading" class="delete">Delete site</button>
        <button type="button" mat-icon-button class="icon"><mat-icon>edit</mat-icon></button>
      </mat-list-item>
    </mat-list>
    <mat-form-field appearance="outline">
      <mat-label>Site name (i.e. suburb)</mat-label>
      <input matInput type="text" formControlName="site" autocomplete="off" placeholder="Site name (i.e. suburb)">
      <mat-error *ngIf="siteForm.get('site').hasError('forbiddenName')">
        A site by this name already exists.
      </mat-error>
    </mat-form-field>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close tabindex=-1>Cancel</button>
    <button mat-raised-button color="primary" [disabled]="loading">{{ siteId ? 'Rename site' : 'Add site'}}</button>
  </mat-dialog-actions>
</form>

<button mat-icon-button (click)="closeDialog()" type="button" class="close-button" tabindex="-1" ><mat-icon>close</mat-icon></button>