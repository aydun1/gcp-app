<h2 mat-dialog-title>Add a run</h2>
<form (ngSubmit)="runId ? renameRun() : addRun()" [formGroup]="runForm">
  <mat-dialog-content class="mat-typography">
    <ng-container *ngIf="data.runs as runs">
      <h3>Runs</h3>
      <mat-list>
        <mat-list-item *ngFor="let run of runs" [class.active] = "run.id === runId" class="active">
          <span>{{ run.fields.Title }}</span>
          <ng-container *ngIf="run.id === runId" matListItemMeta>
            <button color="warn" type="button" mat-raised-button class="icon" (click)="deleteRun()" [disabled]="loading" class="delete">Delete run</button>
          </ng-container>
          <ng-container matListItemMeta>
            <button type="button" mat-icon-button (click)="openEditor(run.id, run.fields.Title)" class="icon"><mat-icon>edit</mat-icon></button>
          </ng-container>
        </mat-list-item>
        <mat-list-item *ngIf="!runs || !runs.length">
          <span>No additional runs yet</span>
        </mat-list-item>
      </mat-list>
    </ng-container>

    <h3 *ngIf="!runId">Add a run</h3>
    <h3 *ngIf="runId">Edit run name</h3>
    <mat-form-field appearance="outline" class="name">
      <mat-label>Run name (i.e. Deliveries)</mat-label>
      <input matInput type="text" formControlName="run" autocomplete="off" placeholder="Run name (i.e. delivery)">
      <mat-error *ngIf="runForm.get('run')?.hasError('forbiddenName')">
        A run by this name already exists.
      </mat-error>
    </mat-form-field>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button type="button" mat-button mat-dialog-close tabindex=-1>Cancel</button>
    <button type="submit" mat-raised-button color="primary" [disabled]="loading">{{ runId ? 'Save changes' : 'Add run'}}</button>
  </mat-dialog-actions>
</form>

<button mat-icon-button (click)="closeDialog()" type="button" class="close-button" tabindex="-1" ><mat-icon>close</mat-icon></button>